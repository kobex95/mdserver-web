/*
 * Performance Optimization for Icons and Images
 * Version: 1.0.0
 * Optimized loading and rendering performance
 */

/* ==================== SVG图标系统 ==================== */
.icon {
  display: inline-block;
  width: 1em;
  height: 1em;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
  vertical-align: middle;
}

/* 常用SVG图标 */
.icon-home { background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z'/%3E%3C/svg%3E"); }
.icon-server { background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M4 1h16c1.1 0 2 .9 2 2v16c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V3c0-1.1.9-2 2-2zm0 2v16h16V3H4zm2 2h12v2H6V5zm0 4h12v2H6V9zm0 4h6v2H6v-2z'/%3E%3C/svg%3E"); }
.icon-monitor { background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M20 3H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h6l-2 3v1h8v-1l-2-3h6c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 12H4V5h16v10z'/%3E%3C/svg%3E"); }
.icon-security { background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z'/%3E%3C/svg%3E"); }
.icon-folder { background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z'/%3E%3C/svg%3E"); }
.icon-logs { background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z'/%3E%3C/svg%3E"); }
.icon-calendar { background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z'/%3E%3C/svg%3E"); }
.icon-plugin { background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z'/%3E%3C/svg%3E"); }
.icon-settings { background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z'/%3E%3C/svg%3E"); }
.icon-exit { background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M10.09 15.59L11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z'/%3E%3C/svg%3E"); }

/* ==================== 图片懒加载 ==================== */
img[data-src] {
  opacity: 0;
  transition: opacity 0.3s ease;
}

img[data-src].loaded {
  opacity: 1;
}

/* 占位符样式 */
.img-placeholder {
  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
  background-size: 200% 100%;
  animation: loading 1.5s infinite;
  border-radius: var(--border-radius-md);
}

@keyframes loading {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

/* ==================== 图片优化 ==================== */
.optimized-img {
  display: block;
  max-width: 100%;
  height: auto;
  border-radius: var(--border-radius-md);
}

/* 响应式图片 */
.responsive-img {
  width: 100%;
  height: auto;
  object-fit: cover;
}

/* 图片预加载 */
.image-preloader {
  position: absolute;
  width: 0;
  height: 0;
  overflow: hidden;
  opacity: 0;
  pointer-events: none;
}

/* ==================== 雪碧图配置 ==================== */
.sprite-icon {
  display: inline-block;
  background-image: url('/static/images/icons-sprite.png');
  background-repeat: no-repeat;
  width: 24px;
  height: 24px;
}

.sprite-icon-home { background-position: 0 0; }
.sprite-icon-server { background-position: -24px 0; }
.sprite-icon-monitor { background-position: -48px 0; }
.sprite-icon-security { background-position: -72px 0; }
.sprite-icon-folder { background-position: -96px 0; }
.sprite-icon-logs { background-position: -120px 0; }
.sprite-icon-calendar { background-position: -144px 0; }
.sprite-icon-plugin { background-position: -168px 0; }
.sprite-icon-settings { background-position: -192px 0; }
.sprite-icon-exit { background-position: -216px 0; }

/* ==================== WebP支持检测 ==================== */
.webp .webp-supported {
  background-image: url('/static/images/background.webp');
}

.no-webp .webp-supported {
  background-image: url('/static/images/background.jpg');
}

/* ==================== 图片压缩和格式优化 ==================== */
.progressive-img {
  position: relative;
  overflow: hidden;
}

.progressive-img .preview {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  filter: blur(2px);
  transform: scale(1.05);
  transition: opacity 0.3s ease;
}

.progressive-img .full {
  position: relative;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.progressive-img.loaded .preview {
  opacity: 0;
}

.progressive-img.loaded .full {
  opacity: 1;
}

/* ==================== CDN图片优化 ==================== */
.cdn-img {
  content-visibility: auto;
  contain-intrinsic-size: 1px 1000px;
}

/* ==================== 图标字体优化 ==================== */
@font-face {
  font-family: 'PanelIcons';
  src: url('/static/fonts/PanelIcons.woff2') format('woff2'),
       url('/static/fonts/PanelIcons.woff') format('woff');
  font-weight: normal;
  font-style: normal;
  font-display: swap;
}

.icon-font {
  font-family: 'PanelIcons';
  speak: never;
  font-style: normal;
  font-weight: normal;
  font-variant: normal;
  text-transform: none;
  line-height: 1;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* ==================== 性能监控 ==================== */
.performance-marker {
  position: absolute;
  width: 1px;
  height: 1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* ==================== 缓存策略 ==================== */
/* 长期缓存的资源 */
.cache-long {
  /* 由服务器配置控制 */
}

/* 短期缓存的资源 */
.cache-short {
  /* 由服务器配置控制 */
}

/* 不缓存的资源 */
.no-cache {
  cache-control: no-cache;
}

/* ==================== 关键资源优先级 ==================== */
/* 关键CSS内联 */
.critical-css {
  /* 在HTML中内联关键CSS */
}

/* 非关键CSS异步加载 */
.non-critical-css {
  media: 'print';
  onload: "this.media='all'";
}

/* ==================== 预加载和预连接 ==================== */
/* DNS预解析 */
.preconnect {
  rel: 'preconnect';
  href: '//fonts.googleapis.com';
}

/* 预加载关键资源 */
.prefetch {
  rel: 'prefetch';
  as: 'image';
}

/* 预渲染 */
.prerender {
  rel: 'prerender';
  href: '/next-page';
}

/* ==================== 服务工作者缓存 ==================== */
.serviceworker-cache {
  /* 由service-worker.js处理 */
}

/* ==================== 响应式图片集 ==================== */
img[srcset] {
  width: 100%;
  height: auto;
}

/* ==================== 图片解码优化 ==================== */
.decoded-img {
  decoding: async;
}

.sync-decoded-img {
  decoding: sync;
}

.auto-decoded-img {
  decoding: auto;
}

/* ==================== 交叉观察器优化 ==================== */
.intersection-observer {
  /* 用于懒加载和动画触发 */
}

/* ==================== 内存优化 ==================== */
.memory-efficient {
  /* 释放不需要的DOM元素 */
  will-change: transform;
}

/* ==================== GPU加速 ==================== */
.gpu-accelerated {
  transform: translateZ(0);
  backface-visibility: hidden;
  perspective: 1000px;
}

/* ==================== 减少重绘和回流 ==================== */
.optimize-reflow {
  /* 使用transform和opacity代替改变布局属性 */
}

/* ==================== 字体加载优化 ==================== */
.font-loading {
  font-display: swap;
}

.font-loaded {
  /* 字体加载完成后的样式 */
}

.font-failed {
  /* 字体加载失败的备用样式 */
}

/* ==================== 压缩算法优化 ==================== */
.compressed-resource {
  /* 服务器端gzip/brotli压缩 */
}

/* ==================== HTTP/2优化 ==================== */
.http2-optimized {
  /* 多路复用资源 */
}